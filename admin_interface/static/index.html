<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartBin - Panneau Administrateur</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="logo">
                <h2>SmartBin Admin</h2>
            </div>
            <nav class="menu">
                <a href="#" class="menu-item active" data-section="overview">Accueil</a>
                <a href="#" class="menu-item" data-section="bins">Gestion des Bacs</a>
                <a href="#" class="menu-item" data-section="detections">D√©tections</a>
                <a href="#" class="menu-item" data-section="errors">Erreurs</a>
                <a href="#" class="menu-item" data-section="settings">Param√®tres</a>
            </nav>
        </div>

        <div class="main-content">
            <div class="header">
                <h1>Tableau de Bord</h1>
                <button id="emergency-stop" class="btn-danger">Arr√™t d'Urgence</button>
            </div>

            <!-- ============= SECTION ACCUEIL ============= -->
            <section id="section-overview" class="section active">
                <div class="section-title">Accueil</div>
                
                <div class="grid">
                    <!-- VUE CAM√âRA -->
                    <div class="card camera-section">
                        <h3>Vue Cam√©ra</h3>
                        <div class="camera-container">
                            <div class="camera-feed" id="camera-feed">
                                <div class="camera-placeholder">
                                    <span>Aucun flux vid√©o</span>
                                </div>
                            </div>
                            <div class="camera-controls">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="yolo-overlay" checked>
                                    <span>Afficher GUI YOLO</span>
                                </label>
                                <button class="btn-secondary" id="camera-refresh">Actualiser</button>
                            </div>
                        </div>
                    </div>

                    <!-- NIVEAUX DE REMPLISSAGE -->
                    <div class="card">
                        <h3>Niveaux de Remplissage</h3>
                        <div class="bin-section">
                            <div class="bin-row">
                                <span class="bin-label">Bac Jaune:</span>
                                <div class="progress-bar">
                                    <div class="progress" id="progress-yellow" style="width: 75%"></div>
                                </div>
                                <span class="percentage" id="percent-yellow">75%</span>
                            </div>

                            <div class="bin-row">
                                <span class="bin-label">Bac Vert:</span>
                                <div class="progress-bar">
                                    <div class="progress" id="progress-green" style="width: 16%"></div>
                                </div>
                                <span class="percentage" id="percent-green">16%</span>
                            </div>

                            <div class="bin-row">
                                <span class="bin-label">Bac Marron:</span>
                                <div class="progress-bar">
                                    <div class="progress" id="progress-brown" style="width: 42%"></div>
                                </div>
                                <span class="percentage" id="percent-brown">42%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- √âTAT √âQUIPEMENTS -->
                <div class="card full-width">
                    <h3>√âtat des √âquipements</h3>
                    <div class="equipment-grid">
                        <!-- Cam√©ra -->
                        <div class="equipment-card">
                            <div class="equipment-header">
                                <h4>Cam√©ra</h4>
                                <span class="status-badge online" id="camera-status">‚úì Connect√©e</span>
                            </div>
                            <div class="equipment-info">
                                <div class="info-row">
                                    <span class="label">R√©solution:</span>
                                    <span id="camera-res">1920x1080</span>
                                </div>
                                <div class="info-row">
                                    <span class="label">FPS:</span>
                                    <span id="camera-fps">30</span>
                                </div>
                                <div class="info-row">
                                    <span class="label">Derni√®re frame:</span>
                                    <span id="camera-lastframe">√Ä l'instant</span>
                                </div>
                            </div>
                        </div>

                        <!-- Arduino -->
                        <div class="equipment-card">
                            <div class="equipment-header">
                                <h4>Arduino</h4>
                                <span class="status-badge online" id="arduino-status">‚úì Connect√©</span>
                            </div>
                            <div class="equipment-info">
                                <div class="info-row">
                                    <span class="label">Port:</span>
                                    <span id="arduino-port">COM3</span>
                                </div>
                                <div class="info-row">
                                    <span class="label">Bauds:</span>
                                    <span id="arduino-bauds">9600</span>
                                </div>
                                <div class="info-row">
                                    <span class="label">Moteur:</span>
                                    <span id="arduino-motor">‚úì Fonctionnel</span>
                                </div>
                            </div>
                        </div>

                        <!-- GPU Nvidia -->
                        <div class="equipment-card">
                            <div class="equipment-header">
                                <h4>GPU Nvidia</h4>
                                <span class="status-badge online" id="gpu-status">‚úì Actif</span>
                            </div>
                            <div class="equipment-info">
                                <div class="info-row">
                                    <span class="label">Mod√®le:</span>
                                    <span id="gpu-model">RTX 3060</span>
                                </div>
                                <div class="info-row">
                                    <span class="label">Temp√©rature:</span>
                                    <span id="gpu-temp">
                                        <span class="temp-value">45</span>¬∞C
                                    </span>
                                </div>
                                <div class="info-row">
                                    <span class="label">Utilisation VRAM:</span>
                                    <span id="gpu-vram">2.1 GB / 12 GB</span>
                                </div>
                            </div>
                        </div>

                        <!-- Syst√®me -->
                        <div class="equipment-card">
                            <div class="equipment-header">
                                <h4>Syst√®me</h4>
                                <span class="status-badge online" id="system-status">‚úì Actif</span>
                            </div>
                            <div class="equipment-info">
                                <div class="info-row">
                                    <span class="label">Uptime:</span>
                                    <span id="system-uptime">18h 45m</span>
                                </div>
                                <div class="info-row">
                                    <span class="label">Disque libre:</span>
                                    <span id="system-disk">156 GB</span>
                                </div>
                                <div class="info-row">
                                    <span class="label">M√©moire RAM:</span>
                                    <span id="system-ram">8.2 GB / 16 GB</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p class="note">√Ä connecter: R√©cup√©rer donn√©es en temps r√©el via API syst√®me</p>
                </div>

                <!-- GESTION DES SCRIPTS -->
                <div class="card full-width">
                    <h3>Gestion des Scripts</h3>
                    <div class="scripts-container">
                        <div class="script-group">
                            <h4>Scripts Disponibles</h4>
                            <div class="script-list">
                                <div class="script-item">
                                    <div class="script-info">
                                        <span class="script-name">test_app.py</span>
                                        <span class="script-desc">Test application et d√©tections</span>
                                    </div>
                                    <div class="script-actions">
                                        <button class="btn-script-run" data-script="test_app.py">‚ñ∂ Lancer</button>
                                        <button class="btn-script-stop" data-script="test_app.py">‚äó Stop</button>
                                        <button class="btn-script-log" data-script="test_app.py">üìã Console</button>
                                    </div>
                                </div>

                                <div class="script-item">
                                    <div class="script-info">
                                        <span class="script-name">test_hardware.py</span>
                                        <span class="script-desc">Test mat√©riel et capteurs</span>
                                    </div>
                                    <div class="script-actions">
                                        <button class="btn-script-run" data-script="test_hardware.py">‚ñ∂ Lancer</button>
                                        <button class="btn-script-stop" data-script="test_hardware.py">‚äó Stop</button>
                                        <button class="btn-script-log" data-script="test_hardware.py">üìã Console</button>
                                    </div>
                                </div>

                                <div class="script-item">
                                    <div class="script-info">
                                        <span class="script-name">run_auto.sh</span>
                                        <span class="script-desc">Lancer en mode automatique</span>
                                    </div>
                                    <div class="script-actions">
                                        <button class="btn-script-run" data-script="run_auto.sh">‚ñ∂ Lancer</button>
                                        <button class="btn-script-stop" data-script="run_auto.sh">‚äó Stop</button>
                                        <button class="btn-script-log" data-script="run_auto.sh">üìã Console</button>
                                    </div>
                                </div>

                                <div class="script-item">
                                    <div class="script-info">
                                        <span class="script-name">run_manual.sh</span>
                                        <span class="script-desc">Lancer en mode manuel</span>
                                    </div>
                                    <div class="script-actions">
                                        <button class="btn-script-run" data-script="run_manual.sh">‚ñ∂ Lancer</button>
                                        <button class="btn-script-stop" data-script="run_manual.sh">‚äó Stop</button>
                                        <button class="btn-script-log" data-script="run_manual.sh">üìã Console</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="script-group">
                            <h4>Console Actuelle</h4>
                            <div class="console-output" id="console-output">
                                <p class="console-line">[INFO] Syst√®me pr√™t</p>
                                <p class="console-line">[INFO] En attente de commandes...</p>
                            </div>
                            <input type="text" id="console-input" class="console-input" placeholder="Entrez une commande...">
                        </div>
                    </div>
                    <p class="note">√Ä connecter: Ex√©cution r√©elle des scripts et streaming de la console</p>
                </div>
            </section>

            <!-- ============= SECTION GESTION BACS ============= -->
            <section id="section-bins" class="section">
                <div class="section-title">Gestion des Bacs</div>
                
                <div class="grid">
                    <div class="card">
                        <h3>Bac Jaune (Recyclage)</h3>
                        <div class="status-item">
                            <span class="label">Remplissage:</span>
                            <span>75%</span>
                        </div>
                        <div class="status-item">
                            <span class="label">Capacit√©:</span>
                            <span>120L</span>
                        </div>
                        <div class="status-item">
                            <span class="label">Objets tri√©s:</span>
                            <span>1,247</span>
                        </div>
                        <button class="btn-secondary">Vider maintenant</button>
                        <p class="note">√Ä connecter: Envoyer commande d'alerte au service de collecte</p>
                    </div>

                    <div class="card">
                        <h3>Bac Vert (Compost)</h3>
                        <div class="status-item">
                            <span class="label">Remplissage:</span>
                            <span>16%</span>
                        </div>
                        <div class="status-item">
                            <span class="label">Capacit√©:</span>
                            <span>120L</span>
                        </div>
                        <div class="status-item">
                            <span class="label">Objets tri√©s:</span>
                            <span>342</span>
                        </div>
                        <button class="btn-secondary">Vider maintenant</button>
                        <p class="note">√Ä connecter: Envoyer commande d'alerte au service de collecte</p>
                    </div>

                    <div class="card">
                        <h3>Bac Marron (G√©n√©ral)</h3>
                        <div class="status-item">
                            <span class="label">Remplissage:</span>
                            <span>42%</span>
                        </div>
                        <div class="status-item">
                            <span class="label">Capacit√©:</span>
                            <span>120L</span>
                        </div>
                        <div class="status-item">
                            <span class="label">Objets tri√©s:</span>
                            <span>856</span>
                        </div>
                        <button class="btn-secondary">Vider maintenant</button>
                        <p class="note">√Ä connecter: Envoyer commande d'alerte au service de collecte</p>
                    </div>
                </div>
            </section>

            <!-- ============= SECTION D√âTECTIONS ============= -->
            <section id="section-detections" class="section">
                <div class="section-title">Derni√®res D√©tections (YOLOv5)</div>
                
                <div class="card full-width">
                    <table class="detection-table">
                        <thead>
                            <tr>
                                <th>Objet D√©tect√©</th>
                                <th>Bac Destination</th>
                                <th>Confiance IA</th>
                                <th>Timestamp</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Verre</td>
                                <td>Vert</td>
                                <td>87%</td>
                                <td>30/01/2026 14:32:15</td>
                            </tr>
                            <tr>
                                <td>Pelure Fruit</td>
                                <td>Jaune</td>
                                <td>92%</td>
                                <td>30/01/2026 14:31:42</td>
                            </tr>
                            <tr>
                                <td>Bouteille Plastique</td>
                                <td>Jaune</td>
                                <td>94%</td>
                                <td>30/01/2026 14:30:08</td>
                            </tr>
                            <tr>
                                <td>Papier</td>
                                <td>Vert</td>
                                <td>88%</td>
                                <td>30/01/2026 14:29:55</td>
                            </tr>
                            <tr>
                                <td>Canette</td>
                                <td>Jaune</td>
                                <td>91%</td>
                                <td>30/01/2026 14:28:22</td>
                            </tr>
                            <tr>
                                <td>Reste Alimentaire</td>
                                <td>Marron</td>
                                <td>85%</td>
                                <td>30/01/2026 14:27:10</td>
                            </tr>
                        </tbody>
                    </table>
                    <p class="note">√Ä connecter: Base de donn√©es des d√©tections</p>
                </div>

                <div class="card full-width">
                    <h3>Statistiques</h3>
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-number">2,847</div>
                            <div class="stat-label">Objets Tri√©s</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number">90.3%</div>
                            <div class="stat-label">Pr√©cision Moyenne</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number">18h 45m</div>
                            <div class="stat-label">Uptime</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number">12</div>
                            <div class="stat-label">Erreurs D√©tect√©es</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ============= SECTION ERREURS ============= -->
            <section id="section-errors" class="section">
                <div class="section-title">Signalements Utilisateurs</div>
                
                <div class="card full-width">
                    <h3>Erreurs Signal√©es (Pouce Rouge)</h3>
                    <div class="errors-container">
                        <div class="error-report">
                            <div class="error-header">
                                <span class="timestamp">30/01/2026 14:15:32</span>
                                <span class="error-id">#001</span>
                            </div>
                            
                            <div class="error-content">
                                <div class="error-image">
                                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='150'%3E%3Crect fill='%23e0e0e0' width='150' height='150'/%3E%3Ctext x='50%25' y='50%25' font-size='14' fill='%23999' text-anchor='middle' dy='.3em'%3EImage d√©tect√©e%3C/text%3E%3C/svg%3E" alt="Objet d√©tect√©">
                                    <p class="image-label">Frame captur√©e</p>
                                </div>
                                
                                <div class="error-details">
                                    <div class="detail-row">
                                        <span class="label">Objet d√©tect√© par l'IA:</span>
                                        <span class="value">Papier</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="label">Bac affect√©:</span>
                                        <span class="value">Vert</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="label">Confiance:</span>
                                        <span class="value">78%</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="label">Correction de l'utilisateur:</span>
                                        <input type="text" class="correction-input" placeholder="Nom correct de l'objet...">
                                    </div>
                                    <button class="btn-correction">‚úì Enregistrer pour l'entra√Ænement</button>
                                </div>
                            </div>
                        </div>

                        <div class="error-report">
                            <div class="error-header">
                                <span class="timestamp">30/01/2026 13:42:10</span>
                                <span class="error-id">#002</span>
                            </div>
                            
                            <div class="error-content">
                                <div class="error-image">
                                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='150'%3E%3Crect fill='%23e0e0e0' width='150' height='150'/%3E%3Ctext x='50%25' y='50%25' font-size='14' fill='%23999' text-anchor='middle' dy='.3em'%3EImage d√©tect√©e%3C/text%3E%3C/svg%3E" alt="Objet d√©tect√©">
                                    <p class="image-label">Frame captur√©e</p>
                                </div>
                                
                                <div class="error-details">
                                    <div class="detail-row">
                                        <span class="label">Objet d√©tect√© par l'IA:</span>
                                        <span class="value">Plastique</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="label">Bac affect√©:</span>
                                        <span class="value">Jaune</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="label">Confiance:</span>
                                        <span class="value">65%</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="label">Correction de l'utilisateur:</span>
                                        <input type="text" class="correction-input" placeholder="Nom correct de l'objet...">
                                    </div>
                                    <button class="btn-correction">‚úì Enregistrer pour l'entra√Ænement</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p class="note">√Ä connecter: R√©cup√©rer signalements depuis la base de donn√©es et syst√®me d'entra√Ænement</p>
                </div>
            </section>

            <!-- ============= SECTION PARAM√àTRES ============= -->
            <section id="section-settings" class="section">
                <div class="section-title">Param√®tres Syst√®me</div>
                
                <div class="grid">
                    <!-- Mode Maintenance -->
                    <div class="card">
                        <h3>Mode Maintenance</h3>
                        <div class="maintenance-section">
                            <p class="maintenance-desc">Arr√™ter la poubelle pour maintenance ou nettoyage.</p>
                            <div class="maintenance-status" id="maintenance-status">
                                <span class="status-dot"></span>
                                <span>Actif</span>
                            </div>
                            <button class="btn-maintenance" id="toggle-maintenance">Activer Maintenance</button>
                        </div>
                    </div>

                    <!-- Param√®tres Config -->
                    <div class="card">
                        <h3>Param√®tres (config.py)</h3>
                        <button class="btn-secondary" id="edit-config">‚öôÔ∏è √âditer config.py</button>
                        <p style="margin-top: 15px; font-size: 0.9em; color: #666;">
                            Les param√®tres seront √©dit√©s et recharg√©s automatiquement.
                        </p>
                    </div>
                </div>

                <!-- √âdition Config -->
                <div class="card full-width" id="config-editor" style="display:none;">
                    <h3>√âdition de config.py</h3>
                    <div class="config-editor-container">
                        <textarea id="config-content" class="config-textarea" placeholder="Contenu de config.py..."></textarea>
                        <div class="editor-actions">
                            <button class="btn-secondary" id="save-config">üíæ Enregistrer</button>
                            <button class="btn-secondary" id="cancel-config">‚úï Annuler</button>
                        </div>
                    </div>
                    <p class="note">√Ä connecter: Lecture/√©criture r√©elle du fichier config.py</p>
                </div>
            </section>
        </div>
    </div>

    <!-- MODAL CONSOLE -->
    <div id="console-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Console - <span id="console-script-name"></span></h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="console-modal-output" id="console-modal-output"></div>
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>
